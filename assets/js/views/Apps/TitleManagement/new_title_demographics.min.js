
var Demographics=function(c,b){var a=this;a.Model={Audience:c.Audience||"",Bisacs:c.Bisacs||[],AgeRange:c.AgeFrom||"",};a.FixedBisacListContainer=[];a.AgeRangeRequired=false;a.AgeRangeDisabled=true;a.AudienceRequired=false;a.AudienceDisabled=false;a.FixedList=[];a.FixedAudienceTypes=[];a.FixedIsoCodesPoop=[];b.$scope.$watchCollection(function(){return a.Model.Audience},function(e,d){if(e.Name=="Children/juvenile"){a.AgeRangeRequired=true;a.AgeRangeDisabled=false}else{a.AgeRangeRequired=false;a.AgeRangeDisabled=true}});b.$scope.$watchCollection(function(){return a.Model.Bisacs},function(e,d){if(a.Model.Bisacs.length==0){a.CheckJuv()}$.each(a.Model.Bisacs,function(g,f){b.$scope.$watchCollection(function(){return f},function(i,h){a.CheckJuv()})})});a.UpdateBisacCodes=function(d){b.$timeout(function(){b.FixedReferences.lookupBisac(a.Model.Bisacs[d].BisacGroup.Id,function(e){a.FixedBisacListContainer[d]=e.data},function(e){alert()})})};$.each(a.Model.Bisacs,function(e,d){a.UpdateBisacCodes(e)});a.addBisac=function(){a.Model.Bisacs.push(new Components.Bisac(a.FixedList||""))};a.removeBisac=function(d){a.Model.Bisacs.splice(d,1)};a.CheckJuv=function(){var d=false;$.each(a.Model.Bisacs,function(f,e){if(e.BisacGroup.Prefix=="JUV"||e.BisacGroup.Prefix=="JNF"){d=true}});if(d){$.each(a.FixedAudienceTypes,function(f,e){if(e.Name=="Children/juvenile"){a.Model.Audience=e}});a.AudienceDisabled=true;a.AudienceRequired=false;a.AgeRangeRequired=true;a.AgeRangeDisabled=false}else{a.AudienceDisabled=false;a.AudienceRequired=true;a.AgeRangeRequired=false;a.AgeRangeDisabled=true}}};