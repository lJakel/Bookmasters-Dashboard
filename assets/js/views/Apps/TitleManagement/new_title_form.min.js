
BMApp.register.controller("NewTitleForm",["scriptLoader","$scope","$rootScope","$timeout","FixedReferences","$stateParams","partialCleanup","GuidCreator","Upload",function(a,j,h,c,f,i,e,g,d){var b=this;b.Dependencies={scriptLoader:a,$scope:j,$rootScope:h,$timeout:c,FixedReferences:f,$stateParams:i,Upload:d};function k(){e.prepare(["BasicInfo","Contributors","Formats","Demographics","Marketing","Modals"]);b.Form={DraftId:g.CreateGuid(),ProductGroupId:null,};b.BasicInfo=new BasicInfo(data.NewTitle.BasicInfo||"",b.Dependencies);b.Contributors=new Contributors(data.NewTitle.Contributors.Contributors||"",b.Dependencies);b.Formats=new Formats(data.NewTitle.Formats.Formats||"",b.Dependencies);b.Demographics=new Demographics(data.NewTitle.Demographics||"",b.Dependencies);b.Marketing=new Marketing(data.NewTitle.Marketing||"",b.Dependencies);b.Covers=new Covers(data.Covers||"",b.Dependencies);b.RefreshJson=function(){$("#jsonPre").text(JSON.stringify({BasicInfo:b.BasicInfo.Model,Contributors:b.Contributors.Model,Formats:b.Formats.Model,Demographics:b.Demographics.Model,Marketing:b.Marketing.Model,Covers:b.Covers.Model,}))};f.getReferences().then(function(l){b.Contributors.ContributorModal.FixedAuthorRoles=$.map(l.ContributorRoles,function(m){return m});b.Formats.FormatModal.FixedProductTypes=$.map(l.FixedProductTypes,function(m){return m});b.Formats.FormatModal.FixedProductForms=$.map(l.FixedProductForms,function(m){return m});b.Formats.FormatModal.FixedProductFormDetails=$.map(l.FixedProductFormDetails,function(m){return m});b.Formats.FormatModal.FixedProductFormDetailSpecifics=$.map(l.FixedProductFormDetailSpecifics,function(m){return m});b.Formats.FormatModal.FixedEditionTypes=$.map(l.Editions,function(m){return m});b.Demographics.FixedAudienceTypes=$.map(l.AudienceTypes,function(m){return m});b.Demographics.FixedList=$.map(l.BisacGroups,function(m){return m})});f.getIsoCodes().then(function(l){b.Formats.FormatModal.FixedIsoCodes=$.map(l,function(m){return m})});f.getDiscountCodes().then(function(l){b.Formats.FormatModal.FixedDiscountCodes=$.map(l,function(m){return m})});c(function(){$('[data-toggle="popover"]').popover()})}c(function(){}).then(k)}]);var data={NewTitle:{BasicInfo:{Publisher:"Awesome Publications INC.",},Contributors:{},Demographics:{},Formats:{},Marketing:{}},};